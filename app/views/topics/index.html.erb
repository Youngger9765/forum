<h1>TOPICS INDEX</h1> 
<h2><%= link_to "About Site", aboutsite_topics_path,:class => "btn btn-default"%></h2>


<ul>
	<li><%= link_to "Sort By Name", topics_path( :order => "name")%></li>	
	<li><%= link_to "Sort By Default", topics_path %></li>

</ul>

<table class="table">
	<tr>
		<td>Title</td>
		<td>Category</td>
		<td>User</td>
		<td>Post Time</td>
		<td>Feedbacks</td>
		<td>Control</td>
	</tr>

<% @topics.each do |t| %>

	<tr>
		<td>
			<%=t.name%>
			
		</td>
		<td>
			<%=t.category.try(:name)%>
		</td>
		<td>
			<%=t.user.try(:email)%>
		</td>
		<td>
			<%=t.created_at%>
		</td>
		<td>
			<%= t.feedbacks.size %> pieces of 
			<%= link_to "Feedback", topic_feedbacks_path(t),:class => "btn btn-primary"%>
		</td>
		<td>
			<%= link_to "Show", topic_path(t),:class => "btn btn-primary"%>
			<%= link_to "Edit", topics_path(:topic_id => t ), :class => "btn btn-default"%>
			<%= link_to "Delete", topic_path(t), :method => :delete, :data => {:confirm => "sure?"},:class => "btn btn-danger" %>
		</td>
	</tr>
<%end%>
</table>

<%= paginate @topics %>


<%#將edit new 放到首頁%>
<%
  if params[:topic_id]
    url = topic_path(@topic)
  else
    url = topics_path
  end
%>

<%= link_to "New Topic", topics_path,:class => "btn btn-primary"%>

<%= form_for @topic, :url => url do |t| %>

	<%= render :partial => 'form', :locals => { :t => t} %>

    <%= t.submit "Submit",:class => "btn btn-primary" %>

<% end %>







